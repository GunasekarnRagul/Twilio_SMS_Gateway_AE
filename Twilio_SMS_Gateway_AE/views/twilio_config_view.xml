<odoo>
    <record id="view_twilio_config_form" model="ir.ui.view">
        <field name="name">twilio.config.form</field>
        <field name="model">twilio.config</field>
        <field name="arch" type="xml">

<form string="Twilio Configuration">

<header>
    <button name="action_test_connection"
            string="Test Connection"
            type="object"
            class="btn-primary"
            icon="fa-plug"
            invisible="connection_status == 'connected'"/>

    <field name="connection_status" widget="statusbar" statusbar_visible="unknown,connected,failed"/>
</header>

<sheet>

    <!-- RIBBONS -->
    <widget name="web_ribbon" title="Connected" bg_color="bg-success"
            invisible="connection_status != 'connected'"/>
    <widget name="web_ribbon" title="Disconnected" bg_color="bg-danger"
            invisible="connection_status != 'failed'"/>

    <!-- SETUP MODE -->
    <div invisible="connection_status == 'connected'">

        <h2 class="text-center mt-3" style="color:#666;">
            <i class="fa fa-cogs"/> Twilio Setup
        </h2>

        <group>
            <group string="API Credentials">
                <field name="name" invisible="1"/>
                <field name="account_sid" placeholder="ACxxxxxxxxxxxxx"/>
                <field name="auth_token" password="True" placeholder='7aedxxxxxxxxxxxxx'/>
            </group>

            <group string="Phone Numbers">
                <field name="twilio_number" placeholder="Add your country code e.g. (+1234567890)"/>
            </group>
        </group>

        <div class="alert alert-info text-center mt-3">
            <b>Tip:</b> Get credentials from
            <a href="https://console.twilio.com" target="_blank">Twilio Console</a>.
        </div>

    </div>


    <!-- DASHBOARD MODE -->
    <div invisible="connection_status != 'connected'">

        <div class="card shadow-lg border-0 mt-3" style="border-radius:15px;overflow:hidden;">

            <div class="card-header p-4"
                 style="background:linear-gradient(135deg,#3BB143,#28A745);color:white;">
                <h3 style='color:white;' class="m-0">
                    <i class="fa fa-check-circle"/> Twilio Active
                </h3>
                <small>Connection verified successfully</small>
            </div>

            <div class="card-body p-4 bg-white">

                <div class="row g-4">

                    <!-- LEFT COLUMN -->
                    <div class="col-md-6 border-end">

                        <h5 class="text-primary mb-4">
                            <i class="fa fa-bar-chart"/> Twilio Account Details
                        </h5>

                        <div class="mb-3">
        <small class="text-muted text-uppercase fw-bold">Account Name</small>
        <div class="fs-5"><field name="account_name" readonly="1"/></div>
    </div>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Account Type</small>
                            <div class="fs-5"><field name="account_type" readonly="1"/></div>
                        </div>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Balance</small>
                            <div class="fs-5 text-info"><field name="account_balance" readonly="1"/></div>
                        </div>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Messages Sent (Today)</small>
                            <div class="fs-5 text-primary"><field name="total_messages_sent" readonly="1"/></div>
                        </div>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Current Bill</small>
                            <div class="fs-5 text-danger"><field name="current_bill_amount" readonly="1"/></div>
                        </div>

                    </div>

                    <!-- RIGHT COLUMN -->
                    <div class="col-md-6">

                        <h5 class="text-primary mb-4">
                            <i class="fa fa-commenting-o"/> SMS Configuration
                        </h5>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Twilio Number</small>
                            <div class="fs-5"><field name="twilio_number" readonly="1"/></div>
                        </div>

                        <div class="mb-3">
                            <small class="text-muted text-uppercase fw-bold">Account SID</small>
                            <div class="text-break font-monospace text-muted">
                                <field name="account_sid" readonly="1"/>
                            </div>
                        </div>

                    </div>
                </div>

                <hr class="my-4"/>

                <div class="d-flex justify-content-between align-items-center">
                    <span><i class="fa fa-clock-o"/> Last Verified: <field name="last_tested" readonly="1"/></span>

                    <button name="action_disconnect"
                            string="Disconnect &amp; Reset"
                            type="object"
                            class="btn btn-outline-danger btn-sm"/>
                </div>

            </div>
        </div>
    </div>

</sheet>
</form>

        </field>
    </record>
</odoo>
